<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <meta name="author" content="Kyllox">

    <title>Licence</title>

    <link rel="icon" href="../images/licence-icon-black.png">

    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">
    <link href="../css/animations.css" rel="stylesheet">
</head>

<body>
    <div class="main-wrapper">
        <nav class="navbar-top">
            <a class="navbar-logo" onclick="goMainPage();">뇌 성격 유형 테스트</a>
        </nav>
        <div class="navbar-bottom">
            <a class="navbar-item-bottom" rel="noopener noreferrer" target="_blank" href="https://brain-personality.site">사진으로 뇌 성격 유형 보러가기</a>
        </div>
        
        
        <div class="licence-wrap">
            <p class="licence-text">본 페이지에 대한 모든 저작권은 <b><u>Kyllox</u></b>에게 있으며, 사용자는 이 페이지의 소스를 무단으로 사용 / 수정 시 저작권법에 따라 법적 책임을 질 수 있습니다. 문의 사항은 <b><u>Kyllox4804@gmail.com</u></b>으로 연락해주시길 바랍니다.<br>아래에서 바로 이메일을 보내실 수 있습니다.</p>

            <section class="download-licence-wrap">
                <button class="download-licence-btn" onclick="window.location.replace('https://www.dropbox.com/s/pcrx11wbuvgyb90/licence.txt?dl=1');"><img class="download-licence-image" src="../images/licence-icon-white.png" alt="licence-icon">TXT 파일 다운로드</button>
            </section>
        </div>


        <div class="send-email-wrap">
            <input type="text" name="name" class="send-email-input form-control" placeholder="이름을 입력해주세요" onkeyup="checkWordCount(this, 10);">
            <input type="text" name="email" class="send-email-input form-control" placeholder="이메일 주소를 입력해주세요">
            <textarea name="message" rows="3" class="send-email-textarea form-control" placeholder="내용을 입력해주세요" onkeyup="checkWordCount(this, 100);"></textarea>
            <input type="button" name="submit" class="send-email-btn" value="메일 보내기"/>
        </div>


        <section class="licence-language-btn-wrap">
            <button class="licence-language-btn" onclick="window.location.replace('licence-en.html');">View in English</button>
        </section>
    </div>


    <script type="text/javascript"src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="../scripts/functions.js"></script>

    <script>
        const name = $('input[name=name]');
        const email = $('input[name=email]');
        const message = $('textarea[name=message]');
        const checkEmail = /^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/;

        function checkWordCount(obj, maxlength) {
            var str = obj.value;
            var str_length = str.length;
            var max_length = maxlength;
            var i = 0;
            var ko_byte = 0;
            var li_len = 0;
            var one_char = "";
            var str2 = "";
            for (i = 0; i < str_length; i++) {
                one_char = str.charAt(i);
                ko_byte++;
            }
            if (ko_byte <= max_length) {
                li_len = i + 1;
            }
            if (ko_byte > max_length) {
                alert(max_length + " 글자 이상 입력할 수 없습니다. \n 초과된 내용은 자동으로 삭제 됩니다.");
                str2 = str.substr(0, max_length);
                obj.value = str2;
            }
            obj.focus();
        }

        function checkWordType() {
            if (name.val() == '') {
                alert("이름을 입력해주세요.");
                name.focus();
                return false;
            } else if (email.val() == '') {
                alert("이메일 주소를 입력해주세요.");
                email.focus();
                return false;
            } else if (!checkEmail.test(email.val())) {
                alert("이메일 주소가 올바르지 않습니다.");
                email.focus();
                return false;
            } else if (message.val() == '') {
                alert("내용을 입력해주세요.");
                message.focus();
                return false;
            } else {
                return true;
            }
        }

        emailjs.init("user_ObDVdiMQlk2RAhavouTNx");

        $('input[name=submit]').click(function() {
            const checkUndefinedMessage = checkWordType();

            var templateParams = {
                name: name.val(),
                email : email.val(),
                message : message.val()
            };

            if (checkUndefinedMessage == true) {
                emailjs.send('service_kyllox', 'template_kyllox', templateParams).then(function(response) {
                    window.alert('성공적으로 이메일을 전송하였습니다.\n' + response.status + ' ' + response.text);
                }, function(e) {
                    window.alert('이메일 전송에 실패하였습니다.\n' + e);
                });
            }
        });
    </script>
</body>

</html>